<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="rurri-article" attributes="article">

  <template if="{{article}}">
    <link rel="stylesheet" href="rurri-article.css">

    <div horizontal center-justified layout>
      <div id="article_wrapper">
        <article>
          <time is="relative-time" datetime="{{article.posted}}"></time>
          <a class="title" href="#/{{articleId}}"><h1 class="title">{{article.title}}<core-icon class="perma-link" icon="fa:link"></core-icon></h1></a>
          <template if="{{article.vimeo_video}}">
            <iframe src="https://player.vimeo.com/video/{{article.vimeo_video}}?color=ffffff" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
          </template>
          <div id="content"></div>
          <template if="{{article.next}}">
            <div class="next-header">Other Reading:</div>
            <rurri-article-preview article="{{article.next}}"></rurri-article-preview>
          </template>
          <facebook-comments id="facebook_comments" appid="778974178884065" pageurl="http://www.rurri.com/#/{{articleId}}"></facebook-comments>
        </article>
      </div>
    </div>
  </template>

  <script>
    (function () {
      Polymer({
        isoDate: null,
        prettyDate: null,
        article: null,
        articleId : null,
        // define element prototype here
        articleChanged: function() {
          this.$.content.innerHTML = this.article.contents;
          this.articleId = this.article.link.replace('.md', '');
        },
      });
    })();
  </script>
</polymer-element>
